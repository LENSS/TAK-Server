{"ast":null,"code":"import _slicedToArray from\"/home/radu/Server/src/takserver-tool-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/home/radu/Server/src/takserver-tool-ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"/home/radu/Server/src/takserver-tool-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _excluded=[\"children\",\"value\",\"index\"];import'./MissionManager.css';import SendInviteMission from'./SendInviteMission';import TransferList from'./TranferList';import React,{useEffect,useRef}from'react';import{styled,useTheme}from'@mui/material/styles';import{DataGrid,GridToolbarContainer,getGridStringOperators}from'@mui/x-data-grid';import Box from'@mui/material/Box';import Drawer from'@mui/material/Drawer';import CssBaseline from'@mui/material/CssBaseline';import MuiAppBar,{AppBarProps as MuiAppBarProps}from'@mui/material/AppBar';import Typography from'@mui/material/Typography';import Tabs from'@mui/material/Tabs';import Tab from'@mui/material/Tab';import DownloadIcon from'@mui/icons-material/Download';import DeleteIcon from'@mui/icons-material/Delete';import{Button,IconButton,ListItemText}from'@mui/material';import List from'@mui/material/List';import ListItem from'@mui/material/ListItem';import ListItemButton from'@mui/material/ListItemButton';import AddIcon from'@mui/icons-material/Add';import EditIcon from'@mui/icons-material/Edit';import RssFeedIcon from'@mui/icons-material/RssFeed';import SendIcon from'@mui/icons-material/Send';import TextField from'@mui/material/TextField';import MailIcon from'@mui/icons-material/Mail';import Select from'@mui/material/Select';import InputLabel from'@mui/material/InputLabel';import MenuItem from'@mui/material/MenuItem';import FormControl from'@mui/material/FormControl';import Chip from'@mui/material/Chip';import OutlinedInput from'@mui/material/OutlinedInput';import moment from'moment';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogContentText from'@mui/material/DialogContentText';import DialogTitle from'@mui/material/DialogTitle';import{useDropzone}from'react-dropzone';import UploadFile from'./UploadFile';import ArchiveIcon from'@mui/icons-material/Archive';import Switch from'@mui/material/Switch';import DataObjectIcon from'@mui/icons-material/DataObject';import CodeIcon from'@mui/icons-material/Code';import Autocomplete from'@mui/material/Autocomplete';import Snackbar from'@mui/material/Snackbar';import MuiAlert from'@mui/material/Alert';import Tooltip from'@mui/material/Tooltip';import{SubscriptRounded}from'@mui/icons-material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var drawerWidth=600;var mockedRows=[{id:'1',password:\"hh\",groups:[\"__ANON__\"],defaultRole:\"__ANON__\",type:'public',chatRoom:\"A\",name:'Row1',description:'fdf',contents:['file.txt'],keywords:'dfd',uid:['uid1'],dataFeeds:[{id:0,type:'stream'}]},{id:'2',password:\"\",groups:[],type:'vbm',chatRoom:\"\",hash:'ID',name:'Row1',description:'fdf',contents:['dfd','fdf','1','6a3d784d-a17f-44f1-b160-337852e8ae3b'],keywords:'dfd',uid:['dfd','fdf'],dataFeeds:[{id:1,type:'predicate'}]}];var available=[{name:'Hello',id:\"0\",type:'stream'},{name:'World',id:\"1\",type:'predicate'},{name:'Test',id:\"2\",type:'plugin'},{name:'Stream',id:\"3\",type:'federate'},{name:'Sweet',id:\"4\",type:'federate'}];var Alert=/*#__PURE__*/React.forwardRef(function Alert(props,ref){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,ref:ref,variant:\"filled\"},props));});// Reset object needed for componets that access the selected row hook\nvar emptyRow={name:\"\",hash:\"\"};var ITEM_HEIGHT=48;var ITEM_PADDING_TOP=8;var MenuProps={PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5+ITEM_PADDING_TOP,width:350}}};function not(a,b){return a.filter(function(value){return b.indexOf(value)===-1;});}var Main=styled('main',{shouldForwardProp:function shouldForwardProp(prop){return prop!=='open';}})(function(_ref){var theme=_ref.theme,open=_ref.open;return _objectSpread({flexGrow:1,padding:theme.spacing(3),transition:theme.transitions.create('margin',{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen}),marginLeft:\"-\".concat(drawerWidth,\"px\")},open&&{transition:theme.transitions.create('margin',{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen}),marginLeft:0});});function TabPanel(props){var children=props.children,value=props.value,index=props.index,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"simple-tabpanel-\".concat(index),\"aria-labelledby\":\"simple-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3,minHeight:'90vh'},children:/*#__PURE__*/_jsx(Typography,{children:children})})}));}function a11yProps(index){return{id:\"simple-tab-\".concat(index),'aria-controls':\"simple-tabpanel-\".concat(index)};}// Custom Toolbar for data grid\nfunction MissionManagerToolbar(_ref2){var rowsSelected=_ref2.rowsSelected,setMultiDeleteOpen=_ref2.setMultiDeleteOpen,handleAdd=_ref2.handleAdd,handleEdit=_ref2.handleEdit,handleDataFeeds=_ref2.handleDataFeeds,handleSendInvite=_ref2.handleSendInvite,handleSendPackage=_ref2.handleSendPackage,handleArchivedMissionsOpen=_ref2.handleArchivedMissionsOpen;return/*#__PURE__*/_jsxs(GridToolbarContainer,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",className:\"FileManagerLabel\",children:\"Mission (COP) Manager\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"error\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),disabled:rowsSelected.length===0,onClick:function onClick(e){setMultiDeleteOpen(true);},children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:handleAdd,children:\"Add \"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(DownloadIcon,{}),href:rowsSelected.length===1?'api/missions/'+rowsSelected[0].name+'/archive':\"\",disabled:rowsSelected.length!==1,children:\"Download\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),onClick:handleEdit,disabled:rowsSelected.length!==1,children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(RssFeedIcon,{}),onClick:handleDataFeeds,disabled:rowsSelected.length!==1,children:\"Data Feeds\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(SendIcon,{}),onClick:handleSendPackage,disabled:rowsSelected.length!==1,children:\"Send\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(MailIcon,{}),onClick:handleSendInvite,disabled:rowsSelected.length!==1,children:\"Invite\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(CodeIcon,{}),href:rowsSelected.length===1?'api/missions/'+rowsSelected[0].name+'/kml':\"\",disabled:rowsSelected.length!==1,children:\"Kml Network Link\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(DownloadIcon,{}),href:rowsSelected.length===1?'api/missions/'+rowsSelected[0].name+'/kml?download=true':\"\",disabled:rowsSelected.length!==1,children:\"Download KML\"}),/*#__PURE__*/_jsx(Button,{className:\"Toolbar\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(ArchiveIcon,{}),onClick:handleArchivedMissionsOpen,children:\"Archived Missions \"})]});}var AppBar=styled(MuiAppBar,{shouldForwardProp:function shouldForwardProp(prop){return prop!=='open';}})(function(_ref3){var theme=_ref3.theme,open=_ref3.open;return _objectSpread({transition:theme.transitions.create(['margin','width'],{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen})},open&&{width:\"calc(100% - \".concat(drawerWidth,\"px)\"),marginLeft:\"\".concat(drawerWidth,\"px\"),transition:theme.transitions.create(['margin','width'],{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen})});});var DrawerHeader=styled('div')(function(_ref4){var theme=_ref4.theme;return _objectSpread(_objectSpread({display:'flex',alignItems:'center',padding:theme.spacing(0,1)},theme.mixins.toolbar),{},{justifyContent:'flex-end'});});var stringOperators=getGridStringOperators().filter(function(op){return['contains'].includes(op.value);});var columns=[{field:'id',headerName:'ID',width:1},{field:'hash',headerName:'hash',width:1},{field:'name',headerName:'Name',width:305,filterOperators:stringOperators,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Tooltip,{title:\"View Json\",children:/*#__PURE__*/_jsx(Button,{href:'api/missions/'+params.value,onClick:function onClick(e){e.stopPropagation();},\"aria-label\":\"Download\",style:{textTransform:'none'},children:params.value})})});}},{field:'description',headerName:'Description',width:185,sortable:false,filterable:false},{field:'contents',headerName:'Contents',width:265,sortable:false,filterable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(List,{dense:true,sx:{maxHeight:100,overflow:'auto',pl:0},children:params.value.map(function(value){return/*#__PURE__*/_jsx(ListItem,{sx:{pl:0},children:/*#__PURE__*/_jsx(ListItemButton,{sx:{height:20,pl:0},href:'/Marti/api/files/'+value.hash,onClick:function onClick(e){e.stopPropagation();},children:/*#__PURE__*/_jsx(ListItemText,{sx:{color:'#1769aa'},primary:value.name})})},value.name);})});}},{field:'dataFeeds',headerName:'Data Feeds',width:115,sortable:false,filterable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(List,{dense:true,sx:{maxHeight:100,overflow:'auto',pl:0},children:params.value.map(function(value){return/*#__PURE__*/_jsx(ListItem,{sx:{pl:0},children:/*#__PURE__*/_jsx(ListItemButton,{sx:{height:20,pl:0},href:'/Marti/inputs/index.html#!/modifyPluginDataFeed/'+value.name,onClick:function onClick(e){e.stopPropagation();},children:/*#__PURE__*/_jsx(ListItemText,{sx:{color:'#1769aa'},primary:value.name})})},value.name);})});}},{field:'groups',headerName:'Groups',width:180,sortable:false,filterable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(List,{dense:true,sx:{maxHeight:100,overflow:'auto',pl:0},children:params.value.map(function(value){return/*#__PURE__*/_jsx(ListItem,{sx:{pl:0},children:/*#__PURE__*/_jsx(ListItemText,{sx:{color:'#1769aa'},primary:value})},value);})});}},{field:'tool',headerName:'Tool',width:155,filterOperators:stringOperators},{field:'create_time',headerName:'Create Time',width:180,filterable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(TextField,{variant:\"standard\",value:moment(params.value).format(\"YYYY-MM-DDThh:mm\"),InputProps:{disableUnderline:true}});}},{field:'uid',headerName:'UID',width:210,sortable:false,filterOperators:stringOperators,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(List,{dense:true,sx:{maxHeight:100,overflow:'auto',pl:0},children:params.value.map(function(value){return/*#__PURE__*/_jsx(ListItem,{sx:{pl:0},children:/*#__PURE__*/_jsx(ListItemButton,{sx:{height:20,pl:0},href:'/Marti/api/cot/xml/'+value,onClick:function onClick(e){e.stopPropagation();},children:/*#__PURE__*/_jsx(ListItemText,{sx:{color:'#1769aa'},primary:value})})},value);})});}},{field:'keywords',headerName:'Keywords',width:215,sortable:false,filterable:false},{field:'creatorUid',headerName:'Creator Uid',width:120,sortable:false,filterable:false}];// Structures for missions\nvar allMissions=[];var copMissions=[];function MissionManager(){// Dialog open hooks\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),multiDeleteOpen=_React$useState2[0],setMultiDeleteOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),uploadOpen=_React$useState4[0],setUploadOpen=_React$useState4[1];// Selected Row hooks\nvar _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),rowsSelected=_React$useState6[0],setRowsSelected=_React$useState6[1];var _React$useState7=React.useState(mockedRows),_React$useState8=_slicedToArray(_React$useState7,2),rows=_React$useState8[0],setRows=_React$useState8[1];// Hooks for filters\nvar _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),expiration=_React$useState10[0],setExpiration=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),missionChanged=_React$useState12[0],setMissionChanged=_React$useState12[1];var _React$useState13=React.useState(0),_React$useState14=_slicedToArray(_React$useState13,2),value=_React$useState14[0],setValue=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),age=_React$useState16[0],setAge=_React$useState16[1];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),checked=_React$useState18[0],setChecked=_React$useState18[1];// Pagination system for grid\nvar _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),page=_React$useState20[0],setPage=_React$useState20[1];var _React$useState21=React.useState({pageSize:6,page:0}),_React$useState22=_slicedToArray(_React$useState21,2),paginationModel=_React$useState22[0],setPaginationModel=_React$useState22[1];var _React$useState23=React.useState(100),_React$useState24=_slicedToArray(_React$useState23,2),rowCount=_React$useState24[0],setRowCount=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),loading=_React$useState26[0],setLoading=_React$useState26[1];var _React$useState27=React.useState(false),_React$useState28=_slicedToArray(_React$useState27,2),apiSent=_React$useState28[0],setApiSent=_React$useState28[1];// Form hooks for Add\nvar _React$useState29=React.useState(\"\"),_React$useState30=_slicedToArray(_React$useState29,2),name=_React$useState30[0],setName=_React$useState30[1];var _React$useState31=React.useState(\"\"),_React$useState32=_slicedToArray(_React$useState31,2),description=_React$useState32[0],setDescription=_React$useState32[1];var _React$useState33=React.useState(\"\"),_React$useState34=_slicedToArray(_React$useState33,2),chatRoom=_React$useState34[0],setChatRoom=_React$useState34[1];var _React$useState35=React.useState(\"\"),_React$useState36=_slicedToArray(_React$useState35,2),password=_React$useState36[0],setPassword=_React$useState36[1];var _React$useState37=React.useState(\"\"),_React$useState38=_slicedToArray(_React$useState37,2),defaultRole=_React$useState38[0],setDefaultRole=_React$useState38[1];var _React$useState39=React.useState([]),_React$useState40=_slicedToArray(_React$useState39,2),groups=_React$useState40[0],setGroups=_React$useState40[1];var _React$useState41=React.useState([]),_React$useState42=_slicedToArray(_React$useState41,2),allGroups=_React$useState42[0],setAllGroups=_React$useState42[1];var _React$useState43=React.useState(true),_React$useState44=_slicedToArray(_React$useState43,2),disableEditAndFeeds=_React$useState44[0],setDisableEditAndFeeds=_React$useState44[1];var _React$useState45=React.useState(false),_React$useState46=_slicedToArray(_React$useState45,2),disableAdd=_React$useState46[0],setDisableAdd=_React$useState46[1];var _React$useState47=React.useState(false),_React$useState48=_slicedToArray(_React$useState47,2),copChecked=_React$useState48[0],setCopChecked=_React$useState48[1];var _React$useState49=React.useState(\"\"),_React$useState50=_slicedToArray(_React$useState49,2),tool=_React$useState50[0],setTool=_React$useState50[1];// Extra hooks for Edit\nvar _React$useState51=React.useState([]),_React$useState52=_slicedToArray(_React$useState51,2),contents=_React$useState52[0],setContents=_React$useState52[1];var _React$useState53=React.useState([]),_React$useState54=_slicedToArray(_React$useState53,2),uid=_React$useState54[0],setUIDs=_React$useState54[1];var _React$useState55=React.useState(\"\"),_React$useState56=_slicedToArray(_React$useState55,2),uidToAdd=_React$useState56[0],setUidToAdd=_React$useState56[1];var _React$useState57=React.useState(\"\"),_React$useState58=_slicedToArray(_React$useState57,2),uidOptions=_React$useState58[0],setUidOptions=_React$useState58[1];var _React$useState59=React.useState([]),_React$useState60=_slicedToArray(_React$useState59,2),uidOriginal=_React$useState60[0],setUidOriginal=_React$useState60[1];var _React$useState61=React.useState([]),_React$useState62=_slicedToArray(_React$useState61,2),contentsOriginal=_React$useState62[0],setContentsOriginal=_React$useState62[1];var _React$useState63=React.useState(\"\"),_React$useState64=_slicedToArray(_React$useState63,2),keywordToAdd=_React$useState64[0],setKeywordToAdd=_React$useState64[1];var _React$useState65=React.useState([]),_React$useState66=_slicedToArray(_React$useState65,2),keywords=_React$useState66[0],setKeywords=_React$useState66[1];var _React$useState67=React.useState([]),_React$useState68=_slicedToArray(_React$useState67,2),keywordOriginal=_React$useState68[0],setKeywordOriginal=_React$useState68[1];var _React$useState69=React.useState(false),_React$useState70=_slicedToArray(_React$useState69,2),keywordShrink=_React$useState70[0],setKeywordShrink=_React$useState70[1];var _React$useState71=React.useState(false),_React$useState72=_slicedToArray(_React$useState71,2),uidShrink=_React$useState72[0],setUidSkrink=_React$useState72[1];// Data feeds hooks for page\nvar _React$useState73=React.useState([]),_React$useState74=_slicedToArray(_React$useState73,2),dataFeedsSelected=_React$useState74[0],setDataFeedsSelected=_React$useState74[1];var _React$useState75=React.useState(false),_React$useState76=_slicedToArray(_React$useState75,2),resetDataFeeds=_React$useState76[0],setResetDataFeeds=_React$useState76[1];var _React$useState77=React.useState(available),_React$useState78=_slicedToArray(_React$useState77,2),dataFeedsAvailable=_React$useState78[0],setDataFeedsAvailable=_React$useState78[1];var _React$useState79=React.useState(false),_React$useState80=_slicedToArray(_React$useState79,2),openSendInvite=_React$useState80[0],setOpenSetInvite=_React$useState80[1];var _React$useState81=React.useState(false),_React$useState82=_slicedToArray(_React$useState81,2),sendBool=_React$useState82[0],setSendBool=_React$useState82[1];var _React$useState83=React.useState([]),_React$useState84=_slicedToArray(_React$useState83,2),archivedMissions=_React$useState84[0],setArchivedMissions=_React$useState84[1];//VBM mode toast\nvar _React$useState85=React.useState(false),_React$useState86=_slicedToArray(_React$useState85,2),vbmMode=_React$useState86[0],setVbmMode=_React$useState86[1];var _React$useState87=React.useState(false),_React$useState88=_slicedToArray(_React$useState87,2),vbmToastOpen=_React$useState88[0],setVbmToastOpen=_React$useState88[1];var _React$useState89=React.useState(\"\"),_React$useState90=_slicedToArray(_React$useState89,2),vbmSeverity=_React$useState90[0],setVbmSeverity=_React$useState90[1];// Sorting via paged missions api\nvar _React$useState91=React.useState(\"\"),_React$useState92=_slicedToArray(_React$useState91,2),sort=_React$useState92[0],setSort=_React$useState92[1];var _React$useState93=React.useState(\"\"),_React$useState94=_slicedToArray(_React$useState93,2),filter=_React$useState94[0],setFilter=_React$useState94[1];var _React$useState95=React.useState(false),_React$useState96=_slicedToArray(_React$useState95,2),archivedMissionOpen=_React$useState96[0],setArchivedMissionOpen=_React$useState96[1];var handleSortModelChange=function handleSortModelChange(newModel){if(newModel.length===0){setSort(\"\");}else{if(newModel[0].sort===\"asc\"){setSort(\"&sort=\"+newModel[0].field+\"&ascending=true\");}if(newModel[0].sort===\"desc\"){setSort(\"&sort=\"+newModel[0].field+\"&ascending=false\");}}};var handleFilterModelChange=function handleFilterModelChange(newModel){if(newModel.items!==null&&newModel.items.length===0){setFilter(\"\");}else{// Model value can be null if set by user\nif(newModel.items[0].value){if(newModel.items[0].field===\"name\"){setFilter(\"&nameFilter=\"+newModel.items[0].value);}if(newModel.items[0].field===\"tool\"){setFilter(\"&tool=\"+newModel.items[0].value);}if(newModel.items[0].field===\"uid\"){setFilter(\"&uidFilter=\"+newModel.items[0].value);}}else{setFilter(\"\");}}console.log(filter);};// Dropzone state management\nvar _React$useState97=React.useState(\"\"),_React$useState98=_slicedToArray(_React$useState97,2),fileProp=_React$useState98[0],setFileProp=_React$useState98[1];var _useDropzone=useDropzone({// Note how this callback is never invoked if drop occurs on the inner dropzone\nnoClick:true,onDrop:function onDrop(files){setFileProp(files[0]);setUploadOpen(true);}}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,open=_useDropzone.open;function addOrEditMission(setValue,value,setApiSent,setMissionChanged,missionChanged,closeAfter){var requestOptions={method:'PUT'};var url='/Marti/api/missions/'+name+'?';if(description!==\"\"){url+='&description='+description;}if(chatRoom!==\"\"){url+='&chatRoom='+chatRoom;}if(password!==\"\"&&password!==\"fakePassword\"){url+='&password='+password;}if(groups.lenth!==0){groups.forEach(function(group){url+=\"&group=\"+group;});url+=\"&allowGroupChange=true\";}if(tool.length!==0){url+=\"&tool=\"+tool;}if(defaultRole!==\"\"&&defaultRole!=null){url+=\"&defaultRole=\"+defaultRole;}if(!isNaN(expiration)&&expiration!=null){url+=\"&expiration=\"+-1;}else{url+=\"&expiration=\"+expiration;}setApiSent(true);// delete log once complete\nconsole.log(\"making request \"+url);fetch(url,requestOptions).then(function(response){if(!response.ok)console.log(\"response failed\");if(response.ok){console.log(\"response OK\");handleAddUIDs();if(keywords!==[]){handleSetKeywords();}deleteUIDs();deleteContents();setApiSent(false);setMissionChanged(!missionChanged);setValue(value);};});}var handleChange=function handleChange(event,newValue){setValue(newValue);};var handleChip=function handleChip(event){var value=event.target.value;setGroups(// On autofill we get a stringified value.\ntypeof value==='string'?value.split(','):value);};var handleContents=function handleContents(event){var value=event.target.value;setContents(// On autofill we get a stringified value.\ntypeof value==='string'?value.split(','):value);};var handleUid=function handleUid(event){var value=event.target.value;if(value.length===0){setUidSkrink(false);}else{setUidSkrink(true);}setUIDs(// On autofill we get a stringified value.\ntypeof value==='string'?value.split(','):value);};var handleKeywordsChip=function handleKeywordsChip(event){var value=event.target.value;if(value.length===0){setKeywordShrink(false);}else{setKeywordShrink(true);}setKeywords(// On autofill we get a stringified value.\ntypeof value==='string'?value.split(','):value);};useEffect(function(){setLoading(true);var pageSize=paginationModel.pageSize;var url='/Marti/api/pagedmissions?passwordProtected=true&defaultRole=true&page='+page+'&pagesize='+pageSize+sort+filter;fetch(url).then(function(response){if(!response.ok)throw new Error(response.status);else return response.json();}).then(function(data){var rows=[];data.data.forEach(function(rowData,i){var role=rowData.defaultRole;var row={id:page*pageSize+i,password:\"\",groups:rowData.groups,name:rowData.name,defaultRole:role===null||role===void 0?void 0:role.type,keywords:rowData.keywords,tool:rowData.tool,chatRoom:rowData.chatRoom,description:rowData.description,expiration:rowData.expiration,create_time:rowData.createTime,creatorUid:rowData.creatorUid,uid:[],dataFeeds:[],contents:[]};if(rowData.passwordProtected===true){row.password=\"fakePassword\";}rowData.uids.forEach(function(uid){row.uid.push(uid.data);});rowData.feeds.forEach(function(feed,i){row.dataFeeds.push({id:feed.dataFeedUid,name:feed.name});});rowData.contents.forEach(function(file){var struct={name:file.data.name,hash:file.data.hash};row.contents.push(struct);});rows.push(row);});setRows(rows);// If we are on edit (content was uploaded), update the edit panel\nif(rowsSelected.length===1){rows.forEach(function(row){if(row.create_time===rowsSelected[0].create_time&&row.name===rowsSelected[0].name){setRowsSelected([row]);if(value===1){setContents(row.contents);setContentsOriginal(row.contents);}}});}if(value===1&&rowsSelected.length===0){rows.forEach(function(row){if(row.name===name){setContents(row.contents);setContentsOriginal(row.contents);}});}setLoading(false);});},[page,paginationModel,missionChanged,sort,filter]);useEffect(function(){// Get the groups\nfetch('/Marti/api/groups/all?useCache=false&sendLatestSA=false').then(function(response){return response.json();}).then(function(data){var groupArray=[];data.data.forEach(function(rowData){groupArray.push(rowData.name);});setAllGroups(groupArray);});fetch('/Marti/api/sync/search?keyword=ARCHIVED_MISSION').then(function(response){return response.json();}).then(function(data){var archivedMissionArray=[];data.data.forEach(function(rowData){var struct={name:rowData.name,hash:rowData.hash};archivedMissionArray.push(struct);});setArchivedMissions(archivedMissionArray);});// Get groups for page\nfetch('/Marti/api/missioncount?passwordProtected=true&defaultRole=true').then(function(response){return response.json();}).then(function(data){setRowCount(data.data);});// Get the available data feeds\nfetch('/Marti/api/datafeeds').then(function(response){return response.json();}).then(function(data){var feedArray=[];data.data.forEach(function(rowData){feedArray.push({id:rowData.uuid,name:rowData.name,type:rowData.type});});setDataFeedsAvailable(feedArray);});},[missionChanged]);useEffect(function(){var url='/Marti/api/cot/matchUid';if(uidToAdd!==\"\"&&uidToAdd!=null){url=url+\"?search=\"+uidToAdd;}fetch(url).then(function(response){if(!response.ok){setUidOptions([]);throw new Error(response.status);}else return response.json();}).then(function(data){var uidOptionsArray=[];data.forEach(function(rowData){uidOptionsArray.push(rowData);});setUidOptions(uidOptionsArray);});},[uidToAdd]);useEffect(function(){var url='/vbm/api/config';fetch(url).then(function(response){if(!response.ok){setVbmMode(false);setVbmSeverity(\"info\");setVbmToastOpen(true);throw new Error(response.status);}else return response.json();}).then(function(data){console.log(data);if(data.vbmEnabled===true){setVbmMode(true);setVbmSeverity(\"success\");setVbmToastOpen(true);}else{setVbmMode(false);setVbmSeverity(\"info\");setVbmToastOpen(true);}});},[]);var theme=useTheme();var _React$useState99=React.useState(false),_React$useState100=_slicedToArray(_React$useState99,2),drawerOpen=_React$useState100[0],setDrawerOpen=_React$useState100[1];var handleNextOrBack=function handleNextOrBack(){if(value===0){setContents([]);addOrEditMission(setValue,1,setApiSent,setMissionChanged,missionChanged);setDisableEditAndFeeds(false);setDisableAdd(true);}else if(value===1){setResetDataFeeds(!resetDataFeeds);addOrEditMission(setValue,2,setApiSent,setMissionChanged,missionChanged);}else{handlePutDatafeeds();setValue(1);}};var handleDrawerClose=function handleDrawerClose(){setDrawerOpen(false);};var handleSaveAndClose=function handleSaveAndClose(){if(value===2){handlePutDatafeeds();}else if(value===1){setResetDataFeeds(!resetDataFeeds);addOrEditMission(setValue,2,setApiSent,setMissionChanged,missionChanged);}else{addOrEditMission(setValue,1,setApiSent,setMissionChanged,missionChanged);}setDrawerOpen(false);};var handleSendInvite=function handleSendInvite(){setSendBool(false);setOpenSetInvite(true);};var handleArchivedMissionsClose=function handleArchivedMissionsClose(){setArchivedMissionOpen(false);};var handleArchivedMissionsOpen=function handleArchivedMissionsOpen(){setArchivedMissionOpen(true);};var handleSendPackage=function handleSendPackage(){setSendBool(true);setOpenSetInvite(true);};var handleAdd=function handleAdd(){var emptyArrUid=[];var emptyArrKeyword=[];setRowsSelected([]);setDisableEditAndFeeds(true);setDisableAdd(false);setName(\"\");setDescription(\"\");setChatRoom(\"\");setCopChecked(false);setDefaultRole([]);setPassword(\"\");setTool(\"public\");setUIDs(emptyArrUid);setUidOriginal(emptyArrUid);setKeywords(emptyArrKeyword);setKeywordOriginal(emptyArrKeyword);setContents([]);setGroups([]);setDrawerOpen(true);setValue(0);};var handleEdit=function handleEdit(){setName(rowsSelected[0].name);setDescription(rowsSelected[0].description);setContents(rowsSelected[0].contents);setContentsOriginal(rowsSelected[0].contents);setUIDs(rowsSelected[0].uid);if(rowsSelected[0].uid.length!==0){setUidSkrink(true);}else{setUidSkrink(false);}setUidOriginal(rowsSelected[0].uid);setKeywords(rowsSelected[0].keywords);if(rowsSelected[0].keywords.length!==0){setKeywordShrink(true);}else{setKeywordShrink(false);}setKeywordOriginal(rowsSelected[0].keywords);setDefaultRole(rowsSelected[0].defaultRole);setChatRoom(rowsSelected[0].chatRoom);setGroups(rowsSelected[0].groups);setExpiration(rowsSelected[0].expiration);setPassword(rowsSelected[0].password);setDataFeeds(rowsSelected[0].dataFeeds);if(rowsSelected[0].tool===\"vbm\"){setCopChecked(true);}else{setCopChecked(false);}setTool(rowsSelected[0].tool);setResetDataFeeds(!resetDataFeeds);setDisableEditAndFeeds(false);setDisableAdd(true);setDrawerOpen(true);setValue(1);};function handlePutDatafeeds(){var feedStructArray=[];dataFeedsSelected.forEach(function(arrayItem){var struct={dataFeedUid:arrayItem.id,name:arrayItem.name};feedStructArray.push(struct);});var data=\"{ \\\"feeds\\\":\"+JSON.stringify(feedStructArray)+\"}\";console.log(data);var url='/Marti/api/missions/'+name;fetch(url,{method:\"PUT\",headers:{'Content-Type':'application/json'},body:data}).then(function(res){if(!res.ok){console.log(\"data feeds not set\");}if(res.ok){setMissionChanged(!missionChanged);setDrawerOpen(false);}});}function handleAddUIDs(){var uidStructArray=[];if(uid.length>0){uid.forEach(function(arrayItem){uidStructArray.push(arrayItem);});var data=\"{ \\\"uids\\\":\"+JSON.stringify(uidStructArray)+\"}\";console.log(data);var url='/Marti/api/missions/'+name+'/contents';fetch(url,{method:\"PUT\",headers:{'Content-Type':'application/json'},body:data}).then(function(res){if(!res.ok){console.log(\"uids not set\");}if(res.ok){setMissionChanged(!missionChanged);}});}}function deleteUIDs(){var arrayToDel=uidOriginal.filter(function(val){return uid.indexOf(val)==-1;});var urls=[];if(arrayToDel.length>0){arrayToDel.forEach(function(rowData){var url='/Marti/api/missions/'+name+'/contents?uid='+rowData;urls.push(url);});Promise.all(urls.map(function(url){return fetch(url,{method:'DELETE'}).then();})).then(function(){setMissionChanged(!missionChanged);});}}function deleteContents(){var arrayToDel=contentsOriginal.filter(function(val){return contents.indexOf(val)==-1;});var urls=[];if(arrayToDel.length>0){arrayToDel.forEach(function(rowData){var url='/Marti/api/missions/'+name+'/contents?hash='+rowData.hash;urls.push(url);});Promise.all(urls.map(function(url){return fetch(url,{method:'DELETE'}).then();})).then(function(){setMissionChanged(!missionChanged);});}}var handleSetRemovePasswords=function handleSetRemovePasswords(){if(password!==\"fakePassword\"){var url='/Marti/api/missions/'+name+'/password?password='+password;fetch(url,{method:\"PUT\"}).then(function(res){if(res.ok){setPassword(\"fakePassword\");}});}else{var url='/Marti/api/missions/'+name+'/password';fetch(url,{method:\"DELETE\"}).then(function(res){if(res.ok){setPassword(\"\");}});}};var handleSetKeywords=function handleSetKeywords(){var url='/Marti/api/missions/'+name+'/keywords';console.log(\"setting:\"+url);var keywordsBody=JSON.stringify(keywords);fetch(url,{method:\"PUT\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:keywordsBody}).then(function(res){if(!res.ok&&rowsSelected.length>0){setKeywords(rowsSelected[0].keywords);}});};var handleDataFeeds=function handleDataFeeds(){handleEdit();setValue(2);};var handleVbmClose=function handleVbmClose(event,reason){if(reason==='clickaway'){return;}setVbmToastOpen(false);};var handleDeleteMissions=function handleDeleteMissions(){var urls=[];if(rowsSelected.length>0){rowsSelected.forEach(function(rowData){var url='/Marti/api/missions/'+rowData.name;urls.push(url);});Promise.all(urls.map(function(url){return fetch(url,{method:'DELETE'}).then();})).then(function(){setMissionChanged(!missionChanged);setMultiDeleteOpen(false);});}};function setDataFeeds(selected){var finalSelect=[];selected.forEach(function(arrayItem){finalSelect.push(dataFeedsAvailable.find(function(item){return item.id===arrayItem.id;}));});setDataFeedsSelected(finalSelect);}return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(Drawer,{sx:{width:drawerWidth,flexShrink:0,'& .MuiDrawer-paper':{width:drawerWidth,boxSizing:'border-box'}},variant:\"persistent\",anchor:\"left\",open:drawerOpen,children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(Tabs,{value:value,onChange:handleChange,variant:\"fullWidth\",\"aria-label\":\"basic tabs example\",children:[/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Add\",disabled:disableAdd},a11yProps(0))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Edit\",disabled:disableEditAndFeeds},a11yProps(1))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Data Feeds\",disabled:disableEditAndFeeds},a11yProps(2)))]})}),/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:apiSent,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:0,children:[/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"name\",value:name,onChange:function onChange(event){setName(event.target.value);},label:\"Name (Required)\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"description\",value:description,onChange:function onChange(event){setDescription(event.target.value);},label:\"Description (Optional)\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"chatRoom\",value:chatRoom,onChange:function onChange(event){setChatRoom(event.target.value);},label:\"Chat Room (Optional)\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"password\",value:password,onChange:function onChange(event){setPassword(event.target.value);},label:\"Password (Optional)\",type:\"password\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{className:\"copSwitch\",variant:\"body1\",children:\"Mark as COP\"}),/*#__PURE__*/_jsx(Switch,{className:\"copSwitch\",checked:copChecked,onChange:function onChange(e){setCopChecked(e.target.checked);if(e.target.checked===true){setTool(\"vbm\");}else{setTool(\"public\");}},inputProps:{'aria-label':'controlled'}}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"tool\",value:tool,onChange:function onChange(event){setTool(event.target.value);},label:\"Tool\",fullWidth:true,variant:\"standard\"})]}),/*#__PURE__*/_jsxs(TextField,{sx:{width:.8,paddingBottom:3},id:\"defaultRole\",label:\"defaultRole\",select:true,value:defaultRole,onChange:function onChange(e){setDefaultRole(e.target.value);},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"MISSION_SUBSCRIBER\",children:\"MISSION_SUBSCRIBER\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"MISSION_OWNER\",children:\"MISSION_OWNER\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"MISSION_READONLY_SUBSCRIBER\",children:\"MISSION_READONLY_SUBSCRIBER\"})]}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(InputLabel,{id:\"groups-label\",children:\"Groups\"}),/*#__PURE__*/_jsx(Select,{style:{width:440},label:\"Groups\",labelId:\"groups-label\",id:\"mission-multiple-chip\",multiple:true,value:groups,onChange:handleChip,input:/*#__PURE__*/_jsx(OutlinedInput,{id:\"select-multiple-chip\",label:\"Chip\"}),renderValue:function renderValue(selected){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(function(value){return/*#__PURE__*/_jsx(Chip,{label:value},value);})});},MenuProps:MenuProps,children:allGroups.map(function(group){return/*#__PURE__*/_jsx(MenuItem,{value:group,children:group},group);})})]})]}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:1,children:/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps({className:'dropzone'})),{},{children:[/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"name\",value:name,onChange:function onChange(event){setName(event.target.value);},label:\"Name (Required)\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"description\",value:description,onChange:function onChange(event){setDescription(event.target.value);},label:\"Description (Optional)\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"chatRoom\",value:chatRoom,onChange:function onChange(event){setChatRoom(event.target.value);},label:\"Chat Room (Optional)\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{className:\"copSwitch\",variant:\"body1\",children:\"Mark as COP\"}),/*#__PURE__*/_jsx(Switch,{className:\"copSwitch\",checked:copChecked,onChange:function onChange(e){setCopChecked(e.target.checked);if(e.target.checked===true){setTool(\"vbm\");}else{setTool(\"public\");}},inputProps:{'aria-label':'controlled'}})]}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8},margin:\"dense\",id:\"tool\",value:tool,onChange:function onChange(event){setTool(event.target.value);},label:\"Tool\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsxs(TextField,{sx:{width:.8,paddingBottom:3},id:\"defaultRole\",label:\"defaultRole\",select:true,value:defaultRole,onChange:function onChange(e){setDefaultRole(e.target.value);},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"MISSION_SUBSCRIBER\",children:\"MISSION_SUBSCRIBER\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"MISSION_OWNER\",children:\"MISSION_OWNER\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"MISSION_READONLY_SUBSCRIBER\",children:\"MISSION_READONLY_SUBSCRIBER\"})]}),/*#__PURE__*/_jsxs(FormControl,{sx:{paddingBottom:3},children:[/*#__PURE__*/_jsx(InputLabel,{id:\"groups-label\",children:\"Groups\"}),/*#__PURE__*/_jsx(Select,{style:{width:440},label:\"Groups\",labelId:\"groups-label\",id:\"mission-multiple-chip\",multiple:true,labelWidth:\"text\".length*9,value:groups,onChange:handleChip,input:/*#__PURE__*/_jsx(OutlinedInput,{id:\"select-multiple-chip\",label:\"Chip\"}),renderValue:function renderValue(selected){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(function(value){return/*#__PURE__*/_jsx(Chip,{label:value},value);})});},MenuProps:MenuProps,children:allGroups.map(function(group){return/*#__PURE__*/_jsx(MenuItem,{value:group,children:group},group);})})]}),/*#__PURE__*/_jsx(TextField,{sx:{width:.8,paddingBottom:3},label:\"Expiration\",id:\"datetime-local\",type:\"datetime-local\",value:expiration===-1||expiration===\"\"?\"\":moment.unix(expiration).format('YYYY-MM-DDThh:mm'),onClick:function onClick(e){e.stopPropagation();},onChange:function onChange(e){setExpiration(moment.utc(e.target.value).unix());},InputLabelProps:{shrink:true}}),/*#__PURE__*/_jsxs(FormControl,{sx:{paddingBottom:3},children:[/*#__PURE__*/_jsx(InputLabel,{id:\"contents-label\",children:\"Contents\"}),/*#__PURE__*/_jsx(Select,{style:{width:335},label:\"Contents\",labelId:\"contents-label\",id:\"content-multiple-chip\",multiple:true,labelWidth:\"text\".length*9,value:contents,onChange:handleContents,input:/*#__PURE__*/_jsx(OutlinedInput,{id:\"select-multiple-chip\",label:\"Chip\"}),renderValue:function renderValue(selected){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(function(value){return/*#__PURE__*/_jsx(Chip,{label:value.name},value.name);})});},MenuProps:MenuProps,children:contentsOriginal.map(function(el){return/*#__PURE__*/_jsx(MenuItem,{value:el,children:el.name},el.name);})})]}),/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(Button,{variant:\"text\",sx:{width:.2,paddingTop:2},onClick:open,children:\"Add File\"}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(InputLabel,{id:\"uid-label\",shrink:uidShrink,children:\"UIDs\"}),/*#__PURE__*/_jsx(Select,{style:{width:335},label:\"UIDs\",labelId:\"uid-label\",id:\"uid-multiple-chip\",multiple:true,labelWidth:\"text\".length*9,value:uid,onChange:handleUid,input:/*#__PURE__*/_jsx(OutlinedInput,{id:\"select-multiple-chip\",label:\"Chip\"}),renderValue:function renderValue(selected){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(function(value){return/*#__PURE__*/_jsx(Chip,{label:value},value);})});},MenuProps:MenuProps,children:uidOriginal.map(function(el){return/*#__PURE__*/_jsx(MenuItem,{value:el,children:el},el);})})]}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(InputLabel,{id:\"uidToAdd-label\"}),/*#__PURE__*/_jsx(Autocomplete,{style:{width:335,paddingTop:20},labelId:\"uidToAdd-label\",inputValue:uidToAdd,onInputChange:function onInputChange(event,newInputValue){setUidToAdd(newInputValue);},id:\"uid-add\",options:uidOptions,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({style:{width:335}},params),{},{label:\"UID\"}));}})]}),/*#__PURE__*/_jsx(Button,{variant:\"text\",sx:{width:.2,paddingTop:4,paddingBottom:5},onClick:function onClick(){uidOriginal.push(uidToAdd);setUidOriginal(uidOriginal);setUidSkrink(true);setUidToAdd(\"\");},children:\"Add\"}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(InputLabel,{id:\"keywords-label\",shrink:keywordShrink,children:\"Keywords\"}),/*#__PURE__*/_jsx(Select,{style:{width:335},label:\"Keywords\",labelId:\"keyword-label\",id:\"keyword-multiple-chip\",multiple:true,labelWidth:\"text\".length*9,value:keywords,onChange:handleKeywordsChip,input:/*#__PURE__*/_jsx(OutlinedInput,{id:\"select-multiple-chip\",label:\"Chip\"}),renderValue:function renderValue(selected){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(function(value){return/*#__PURE__*/_jsx(Chip,{label:value},value);})});},MenuProps:MenuProps,children:keywordOriginal.map(function(el){return/*#__PURE__*/_jsx(MenuItem,{value:el,children:el},el);})})]}),/*#__PURE__*/_jsx(TextField,{sx:{width:.6},margin:\"dense\",id:\"keywords-add\",label:\"Keywords\",value:keywordToAdd,onChange:function onChange(event){setKeywordToAdd(event.target.value);},fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(Button,{variant:\"text\",sx:{width:.2,paddingTop:2},onClick:function onClick(){keywordOriginal.push(keywordToAdd);setKeywordOriginal(keywordOriginal);setKeywordShrink(true);setKeywordToAdd(\"\");},children:\"Add\"}),/*#__PURE__*/_jsx(TextField,{sx:{width:.6},margin:\"dense\",id:\"password\",value:password,disabled:password===\"fakePassword\",onChange:function onChange(event){setPassword(event.target.value);},label:\"Password (Optional)\",type:\"password\",fullWidth:true,variant:\"standard\"}),/*#__PURE__*/_jsx(Button,{variant:\"text\",sx:{width:.2,paddingTop:2},disabled:password===\"\",onClick:handleSetRemovePasswords,children:password===\"fakePassword\"?\"Remove\":\"Set\"})]}))}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:2,children:/*#__PURE__*/_jsx(TransferList,{available:dataFeedsAvailable,selected:dataFeedsSelected,setSelected:setDataFeedsSelected,resetList:resetDataFeeds})}),/*#__PURE__*/_jsxs(Box,{sx:{borderBottom:1,borderColor:'divider',display:'flex',justifyContent:'space-evenly'},children:[/*#__PURE__*/_jsx(Button,{variant:\"text\",disabled:name===\"\"&&value===0,onClick:handleNextOrBack,children:value===2?\"Save & Go Back\":\"Save & Next\"}),/*#__PURE__*/_jsx(Button,{variant:\"text\",disabled:name===\"\",onClick:handleSaveAndClose,children:\"Save & Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"text\",onClick:handleDrawerClose,children:\"Cancel & Close\"})]})]}),/*#__PURE__*/_jsxs(Main,{open:drawerOpen,className:\"DataTable\",children:[/*#__PURE__*/_jsx(DataGrid,{rows:rows,columns:columns,columnVisibilityModel:{id:false,hash:false},rowsSelected:rowsSelected,rowHeight:100,onRowSelectionModelChange:function onRowSelectionModelChange(ids){var selectedRowData=ids.map(function(id){return rows.find(function(row){return row.id===id;});});setRowsSelected(selectedRowData);},pagination:true,autoPageSize:true,sortingMode:\"server\",onSortModelChange:handleSortModelChange,filterMode:\"server\",onFilterModelChange:handleFilterModelChange,checkboxSelection:true,page:page,onPageChange:function onPageChange(newPage){setPage(newPage);},rowCount:rowCount,paginationMode:\"server\",paginationModel:paginationModel,onPaginationModelChange:function onPaginationModelChange(pgModel){setPaginationModel(pgModel);setPage(pgModel.page);},components:{Toolbar:MissionManagerToolbar},componentsProps:{toolbar:{rowsSelected:rowsSelected,setMultiDeleteOpen:setMultiDeleteOpen,handleAdd:handleAdd,handleEdit:handleEdit,handleDataFeeds:handleDataFeeds,handleSendInvite:handleSendInvite,handleSendPackage:handleSendPackage,handleArchivedMissionsOpen:handleArchivedMissionsOpen}}}),/*#__PURE__*/_jsx(Snackbar,{open:vbmToastOpen,autoHideDuration:6000,onClose:handleVbmClose,children:/*#__PURE__*/_jsx(Alert,{onClose:handleVbmClose,severity:vbmSeverity,sx:{width:'100%'},children:vbmMode===true?\"VBM Mode enabled\":\"VBM Mode not enabled\"})})]}),/*#__PURE__*/_jsx(UploadFile,{openHook:uploadOpen,setOpenHook:setUploadOpen,deleted:missionChanged,setDeleted:setMissionChanged,fileProp:fileProp,setFileProp:setFileProp,selectedMission:name}),/*#__PURE__*/_jsx(SendInviteMission,{openHook:openSendInvite,setOpenHook:setOpenSetInvite,sendBool:sendBool,missionSelected:rowsSelected}),/*#__PURE__*/_jsxs(Dialog,{open:multiDeleteOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:\"Delete \"+rowsSelected.length+\" Missions ?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"The selected missions will be removed from the database\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setMultiDeleteOpen(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleDeleteMissions,autoFocus:true,children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:archivedMissionOpen,onClose:handleArchivedMissionsClose,fullWidth:true,scroll:\"paper\",maxWidth:\"xl\",children:[/*#__PURE__*/_jsx(DialogTitle,{textAlign:\"center\",children:\"Archived Missions\"}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsx(List,{sx:{textAlign:'center'},children:archivedMissions.map(function(m){return/*#__PURE__*/_jsx(ListItem,{sx:{textAlign:'center'},component:\"a\",href:\"/Marti/sync/content?hash=\"+m.hash,children:/*#__PURE__*/_jsx(ListItemText,{primary:\"\"+m.name})});})})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleArchivedMissionsClose,children:\"Close\"})})]})]});}export default MissionManager;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}