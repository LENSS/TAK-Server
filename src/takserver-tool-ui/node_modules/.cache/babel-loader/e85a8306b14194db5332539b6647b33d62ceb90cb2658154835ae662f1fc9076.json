{"ast":null,"code":"import _slicedToArray from\"/home/radu/Server/src/takserver-tool-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/home/radu/Server/src/takserver-tool-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import Grid from'@mui/material/Grid';import List from'@mui/material/List';import Card from'@mui/material/Card';import CardHeader from'@mui/material/CardHeader';import ListItem from'@mui/material/ListItem';import ListItemText from'@mui/material/ListItemText';import ListItemIcon from'@mui/material/ListItemIcon';import Checkbox from'@mui/material/Checkbox';import Button from'@mui/material/Button';import Divider from'@mui/material/Divider';import Typography from'@mui/material/Typography';import AirIcon from'@mui/icons-material/Air';import PowerIcon from'@mui/icons-material/Power';import GroupIcon from'@mui/icons-material/Group';import DataObjectIcon from'@mui/icons-material/DataObject';import{createTheme}from'@mui/material/styles';import grey from'@mui/material/colors/grey';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function not(a,b){return a.filter(function(value){return b.indexOf(value)===-1;});}function intersection(a,b){return a.filter(function(value){return b.indexOf(value)!==-1;});}function union(a,b){return[].concat(_toConsumableArray(a),_toConsumableArray(not(b,a)));}//const available = [{id: 0, type:'stream'},{id: 1, type:'predicate'},{id: 2, type:'plugin'},{id: 3, type:'federate'},\n//{id: 4, type:'federate'}]\nexport default function TransferList(_ref){var available=_ref.available,selected=_ref.selected,setSelected=_ref.setSelected,resetList=_ref.resetList;var theme=createTheme({palette:{primary:{main:grey[900]}}});var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),checked=_React$useState2[0],setChecked=_React$useState2[1];var _React$useState3=React.useState(not(available,selected)),_React$useState4=_slicedToArray(_React$useState3,2),left=_React$useState4[0],setLeft=_React$useState4[1];var _React$useState5=React.useState(\"outlined\"),_React$useState6=_slicedToArray(_React$useState5,2),streamVariant=_React$useState6[0],setStreamVariant=_React$useState6[1];var _React$useState7=React.useState(\"outlined\"),_React$useState8=_slicedToArray(_React$useState7,2),predicateVariant=_React$useState8[0],setPredicateVariant=_React$useState8[1];var _React$useState9=React.useState(\"outlined\"),_React$useState10=_slicedToArray(_React$useState9,2),pluginVariant=_React$useState10[0],setPluginVariant=_React$useState10[1];var _React$useState11=React.useState(\"outlined\"),_React$useState12=_slicedToArray(_React$useState11,2),federateVariant=_React$useState12[0],setFederateVariant=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),filter=_React$useState14[0],setFilter=_React$useState14[1];var leftChecked=intersection(checked,left);var rightChecked=intersection(checked,selected);var _React$useState15=React.useState(not(available,selected)),_React$useState16=_slicedToArray(_React$useState15,2),resetLeft=_React$useState16[0],setResetLeft=_React$useState16[1];useEffect(function(){console.log(selected);handleDataFeedChange();},[resetList]);function handleFilter(type){setStreamVariant(\"outlined\");setPredicateVariant(\"outlined\");setPluginVariant(\"outlined\");setFederateVariant(\"outlined\");if(type==='Streaming'&&filter!==\"Streaming\"){setStreamVariant(\"contained\");setLeft(resetLeft.filter(function(el){return el.type==='Streaming';}));setFilter(\"Streaming\");}else if(type==='Streaming'){setLeft(resetLeft);setFilter(\"\");}if(type==='Predicate'&&filter!==\"Predicate\"){setPredicateVariant(\"contained\");setLeft(resetLeft.filter(function(el){return el.type==='Predicate';}));setFilter(\"Predicate\");}else if(type==='Predicate'){setLeft(resetLeft);setFilter(\"\");}if(type==='Plugin'&&filter!==\"Plugin\"){setPluginVariant(\"contained\");setLeft(resetLeft.filter(function(el){return el.type==='Plugin';}));setFilter(\"Plugin\");}else if(type==='Plugin'){setLeft(resetLeft);setFilter(\"\");}if(type==='Federate'&&filter!==\"Federate\"){setFederateVariant(\"contained\");setLeft(resetLeft.filter(function(el){return el.type==='Federate';}));setFilter(\"Federate\");}else if(type==='Federate'){setLeft(resetLeft);setFilter(\"\");}}var handleToggle=function handleToggle(value){return function(){var currentIndex=checked.indexOf(value);var newChecked=_toConsumableArray(checked);if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setChecked(newChecked);};};var numberOfChecked=function numberOfChecked(items){return intersection(checked,items).length;};var handleToggleAll=function handleToggleAll(items){return function(){if(numberOfChecked(items)===items.length){setChecked(not(checked,items));}else{setChecked(union(checked,items));}};};var handleCheckedRight=function handleCheckedRight(){setSelected(selected.concat(leftChecked));setLeft(not(left,leftChecked));setResetLeft(not(resetLeft,leftChecked));setChecked(not(checked,leftChecked));};var handleCheckedLeft=function handleCheckedLeft(){setLeft(left.concat(rightChecked));setResetLeft(resetLeft.concat(rightChecked));if(filter!==\"\"){// extra concat is needed set the hook set as aync and we can't count on it being updated in time\nsetLeft(resetLeft.concat(rightChecked).filter(function(el){return el.type===filter;}));}setSelected(not(selected,rightChecked));setChecked(not(checked,rightChecked));};function handleDataFeedChange(){setLeft(not(available,selected));setResetLeft(not(available,selected));setChecked([]);};var customList=function customList(title,items){return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{sx:{px:2,py:1},avatar:/*#__PURE__*/_jsx(Checkbox,{onClick:handleToggleAll(items),checked:numberOfChecked(items)===items.length&&items.length!==0,indeterminate:numberOfChecked(items)!==items.length&&numberOfChecked(items)!==0,disabled:items.length===0,inputProps:{'aria-label':'all items selected'}}),title:title,subheader:\"\".concat(numberOfChecked(items),\"/\").concat(items.length,\" selected\")}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(List,{sx:{width:200,height:530,bgcolor:'background.paper',overflow:'auto'},dense:true,component:\"div\",role:\"list\",children:items.map(function(value){if(value===undefined){return/*#__PURE__*/_jsx(_Fragment,{});}var labelId=\"transfer-list-all-item-\".concat(value.name,\"-label\");return/*#__PURE__*/_jsxs(ListItem,{role:\"listitem\",button:true,onClick:handleToggle(value),children:[/*#__PURE__*/_jsxs(ListItemIcon,{children:[/*#__PURE__*/_jsx(Checkbox,{checked:checked.indexOf(value)!==-1,tabIndex:-1,disableRipple:true,inputProps:{'aria-labelledby':labelId}}),value.type==='Streaming'?/*#__PURE__*/_jsx(AirIcon,{sx:{mt:1,mr:0.5}}):/*#__PURE__*/_jsx(_Fragment,{}),value.type==='Predicate'?/*#__PURE__*/_jsx(DataObjectIcon,{sx:{mt:1,mr:0.5}}):/*#__PURE__*/_jsx(_Fragment,{}),value.type==='Plugin'?/*#__PURE__*/_jsx(PowerIcon,{sx:{mt:1,mr:0.5}}):/*#__PURE__*/_jsx(_Fragment,{}),value.type==='Federate'?/*#__PURE__*/_jsx(GroupIcon,{sx:{mt:1,mr:0.5}}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(ListItemText,{id:labelId,primary:\"\".concat(value.name)})]},value.id);})})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{sx:{pl:5},variant:\"h5\",children:\"Filter Available Feeds:\"}),/*#__PURE__*/_jsx(Button,{sx:{ml:5},className:\"Toolbar\",color:\"primary\",theme:theme,onClick:function onClick(){handleFilter(\"Streaming\");},variant:streamVariant,startIcon:/*#__PURE__*/_jsx(AirIcon,{}),children:\"Stream\"}),/*#__PURE__*/_jsx(Button,{sx:{ml:1,mr:13},className:\"Toolbar\",color:\"primary\",theme:theme,onClick:function onClick(){handleFilter(\"Predicate\");},variant:predicateVariant,startIcon:/*#__PURE__*/_jsx(DataObjectIcon,{}),children:\"Predicate\"}),/*#__PURE__*/_jsx(Button,{sx:{ml:5,mt:2},className:\"Toolbar\",color:\"primary\",theme:theme,onClick:function onClick(){handleFilter(\"Plugin\");},variant:pluginVariant,startIcon:/*#__PURE__*/_jsx(PowerIcon,{}),children:\"Plugin\"}),/*#__PURE__*/_jsx(Button,{sx:{ml:2,mt:2},className:\"Toolbar\",color:\"primary\",theme:theme,onClick:function onClick(){handleFilter(\"Federate\");},variant:federateVariant,startIcon:/*#__PURE__*/_jsx(GroupIcon,{}),children:\"Federate\"}),/*#__PURE__*/_jsxs(Grid,{sx:{marginTop:1},container:true,spacing:2,justifyContent:\"center\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:customList('Available',left)}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Button,{sx:{my:0.5},variant:\"outlined\",size:\"small\",onClick:handleCheckedRight,disabled:leftChecked.length===0,\"aria-label\":\"move selected right\",children:\">\"}),/*#__PURE__*/_jsx(Button,{sx:{my:0.5},variant:\"outlined\",size:\"small\",onClick:handleCheckedLeft,disabled:rightChecked.length===0,\"aria-label\":\"move selected left\",children:\"<\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,children:customList('Current',selected)})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}