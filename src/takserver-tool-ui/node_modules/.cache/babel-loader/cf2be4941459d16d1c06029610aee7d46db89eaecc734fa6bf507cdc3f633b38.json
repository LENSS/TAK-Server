{"ast":null,"code":"import _slicedToArray from\"/home/radu/Server/src/takserver-tool-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import Button from'@mui/material/Button';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogTitle from'@mui/material/DialogTitle';import Box from'@mui/material/Box';import OutlinedInput from'@mui/material/OutlinedInput';import MenuItem from'@mui/material/MenuItem';import Select from'@mui/material/Select';import Chip from'@mui/material/Chip';// Constants to use throughout the component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ITEM_HEIGHT=48;var ITEM_PADDING_TOP=8;var MenuProps={PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5+ITEM_PADDING_TOP,width:350}}};// Structures for missions\nvar allMissions=[];var copMissions=[];function SendInviteMission(_ref){var openHook=_ref.openHook,setOpenHook=_ref.setOpenHook,sendBool=_ref.sendBool,missionSelected=_ref.missionSelected;// Hooks\nvar _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),contacts=_React$useState2[0],setContacts=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),checked=_React$useState4[0],setChecked=_React$useState4[1];useEffect(function(){fetch('/Marti/api/contacts/all').then(function(response){return response.json();}).then(function(data){var contactsArray=[];data.forEach(function(rowData){if(rowData.uid!==\"\"){var struct={name:rowData.callsign,uid:rowData.uid};contactsArray.push(struct);}});setContacts(contactsArray);});setChecked([]);},[openHook]);var handleContacts=function handleContacts(event){var value=event.target.value;setChecked(// On autofill we get a stringified value.\ntypeof value==='string'?value.split(','):value);};var sendOrInviteMission=function sendOrInviteMission(){var url=\"\";if(sendBool){url=\"/Marti/api/missions/\"+missionSelected[0].name+\"/send\";}else{url=\"/Marti/api/missions/\"+missionSelected[0].name+\"/invite\";}var formBody=[];checked.forEach(function(arrayItem){formBody.push(\"contacts=\"+arrayItem.uid);});formBody=formBody.join(\"&\");fetch(url,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded;charset=UTF-8'},body:formBody}).then(function(res){if(res.ok){setOpenHook(false);}});};return/*#__PURE__*/_jsxs(Dialog,{open:openHook,fullWidth:true,maxWidth:\"sm\",children:[/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{pl:0},children:sendBool?\"Send Mission Package\":\"Send Mission Invite\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[missionSelected.length>0?\"Mission Name: \"+missionSelected[0].name:\"\",\" \"]}),/*#__PURE__*/_jsx(DialogTitle,{sx:{pl:0},children:\"Send Mission To\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Select,{style:{width:350},labelId:\"mission-chip-label\",id:\"mission-multiple-chip\",multiple:true,value:checked,onChange:handleContacts,input:/*#__PURE__*/_jsx(OutlinedInput,{id:\"select-multiple-chip\",label:\"Chip\"}),renderValue:function renderValue(selected){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(function(value){return/*#__PURE__*/_jsx(Chip,{label:value.name},value.name);})});},MenuProps:MenuProps,children:contacts.map(function(contact){return/*#__PURE__*/_jsx(MenuItem,{value:contact,children:contact.name},contact.name);})})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setOpenHook(false);},children:\"Close\"}),/*#__PURE__*/_jsx(Button,{onClick:sendOrInviteMission,children:\"Send\"})]})]});}export default SendInviteMission;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}